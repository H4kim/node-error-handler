language: node_js
node_js:
  - '10'

branches:
  only:
    - master

cache:
  directories:
    - node_modules

install:
  - npm install

addons:
  sonarcloud:
    organization: 'lfurnielis'
    token:
      secure: 'J7wLgKAyiVtz+7ZEh5/pVoCSWMuN5o1ouW0hm1Q+VVIM3WAvrS9Vb1SIZZ5R7RubP/1HBY5pXyLCEsFCNT7uyPyt/4FzGXShgGGoo+vEGxmuxLmFjdiVnt6NZ9AFcKXQgP0MtlO2840UlDw5FYRJ4Af0tS0WrdJQCsc97F+mJSBWOQWpAe71owCdWTNetAHnlfN9XjdPq+ZlGm3x0E5pAMvwlESt8PFktZi8OrSN8P7CQCZQpohNYMOWIMKTk2TM0k4wnU66JiQEHIQMD5Lz6ZRC/oAt6WuR2X0FHEaKXV1/bjE1HVsO1d5863nBKcGIS2ZqEesrv7ze0fz6Njr2Ru1V6BkrRkzj+n4ihH/Ux33gQ7KysVPhJDuE02FAo3ojzLvvCdYl23pDAfyuCpq92an2DOolyPGelCp6XjldbtzpAhiZZm1CKPt2tVjtS4zVwZxPbZwjnc0K3Si6exxHqjryCRF5yyKx90Q2Z+uMuo7zDhgDaG1upmu3DjimuMeSe5S8SE/g4JZWQoKLCDyFSO6RNxy0pdErlCsWsaX+tLRgTJih2rc1P0t/a85viwsOzTNa2TnuX4kh25qyG+1XCBiuwJ+m68UPHKbDeBTBKuEqt8uI1u2CNwbTcoYZewNCaZaKip5IxwTIv2BQeT1tLWFqsg2PLofX5v2y6SiokaI='

script:
  - npm test
  - sonar-scanner

after_script:
  - cat ./coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js

notifications:
  email: false
